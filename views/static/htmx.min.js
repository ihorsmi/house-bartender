(()=>{function q(a,b=document){return b.querySelector(a)}function qa(a,b=document){return Array.from(b.querySelectorAll(a))}function enc(fd){let p=new URLSearchParams;for(let [k,v] of fd.entries())p.append(k,v);return p.toString()}async function req(el,method,url,body){let headers={"HX-Request":"true"};let opt={method,headers,credentials:"same-origin"};if(body!=null){headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8";opt.body=body}let r=await fetch(url,opt);let redir=r.headers.get("HX-Redirect");if(redir){window.location.assign(redir);return null}if(r.status===204)return null;return await r.text()}function getTarget(el){let sel=el.getAttribute("hx-target");if(!sel||sel==="this")return el;try{return q(sel)||el}catch{return el}}function swapInto(target,how,html){how=(how||"innerHTML").trim();if(how==="outerHTML"){target.outerHTML=html;return}if(how==="beforeend"){target.insertAdjacentHTML("beforeend",html);return}if(how==="afterbegin"){target.insertAdjacentHTML("afterbegin",html);return}target.innerHTML=html}async function doGet(el){let url=el.getAttribute("hx-get");if(!url)return;let html=await req(el,"GET",url,null);if(html==null)return;let t=getTarget(el);swapInto(t,el.getAttribute("hx-swap"),html);process(t)}async function doPostFrom(el){let url=el.getAttribute("hx-post");if(!url)return;let form=null;if(el.tagName==="FORM")form=el;else form=el.closest("form");let body="";if(form){let fd=new FormData(form);body=enc(fd)}let html=await req(el,"POST",url,body);if(html==null)return;let t=getTarget(el);swapInto(t,el.getAttribute("hx-swap"),html);process(t)}function wire(el){let trig=(el.getAttribute("hx-trigger")||"").trim();if(el.hasAttribute("hx-get")){if(trig==="load"){queueMicrotask(()=>doGet(el));return}if(trig==="change"){el.addEventListener("change",e=>{e.preventDefault();doGet(el)});return}el.addEventListener("click",e=>{e.preventDefault();doGet(el)});return}if(el.hasAttribute("hx-post")){if(el.tagName==="FORM"){el.addEventListener("submit",e=>{e.preventDefault();doPostFrom(el)});return}el.addEventListener("click",e=>{e.preventDefault();doPostFrom(el)});return}}function process(root=document){qa("[hx-get],[hx-post]",root).forEach(wire)}document.addEventListener("DOMContentLoaded",()=>process());window.htmx={process};})();
